var t=require("axios"),e=require("qs"),r=require("sweetalert2");function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=/*#__PURE__*/a(t),o=/*#__PURE__*/a(r);function s(t){return Object.is(t,null)}function i(t){return function(t){return Object.is(t,void 0)}(t)||s(t)}function u(t){return"string"==typeof t}function c(t){return u(t)&&""!==t.trim()}function d(t){return"object"==typeof t&&!s(t)&&!function(t){return Array.isArray(t)}(t)}function f(t){const e={width:500,iconHtml:'<i class="bi bi-exclamation-circle text-primary"></i>',customClass:{icon:"border-0 mt-0 mb-3",confirmButton:"btn btn-primary px-4 py-2"},showClass:{popup:"animate__animated animate__fadeInUp animate__faster",backdrop:"swal2-backdrop-show"},hideClass:{popup:"animate__animated animate__fadeOutDown animate__faster",backdrop:"swal2-backdrop-hide"},...t};return o.default.fire(e)}function p(t,r,a){const o=n.default.create();return o.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",o.defaults.headers.put["Content-Type"]="application/x-www-form-urlencoded",o.defaults.headers.patch["Content-Type"]="application/x-www-form-urlencoded",o.interceptors.response.use(m,x),o.request({method:t,url:r,timeout:0,paramsSerializer:t=>e.stringify(t,{arrayFormat:"brackets"}),withCredentials:!1,responseType:"json",...a})}function l(t){let e;if(t instanceof Error){if(i(t.response))return void f({text:"网络繁忙（400001），请稍后再试",confirmButtonText:"关 闭"}).then(()=>{});d(t.response)&&!i(t.response.data)&&(t=t.response)}d(t)||f({text:"网络繁忙（400002），请稍后再试",confirmButtonText:"关 闭"}).then(()=>{});const r={...t}.data;if(d(r)||f({text:"网络繁忙（400003），请稍后再试",confirmButtonText:"关 闭"}).then(()=>{}),e="网络繁忙（400000），请稍后再试",c(r.err)&&(e=r.err),r.retCode>=500)e="网络繁忙（400500），请稍后再试";else if(401===r.retCode)e="网络繁忙（400401），请稍后再试";else if(403===r.retCode)e="网络繁忙（400403），请稍后再试";else if(404===r.retCode)e="网络繁忙（400404），请稍后再试";else if(r.retCode>=400)if(Array.isArray(r.data))d(r.data[0])&&c(r.data[0].message)&&(e=r.data[0].message);else if(d(r.data))if(c(r.data.err))e=r.data.err;else if(d(r.data.err)){const t=Object.values(r.data.err);c(t[0])?e=t[0]:Array.isArray(t[0])&&c(t[0][0])&&(e=t[0][0])}else c(r.data.message)&&(e=r.data.message);f({text:e,confirmButtonText:"关 闭"}).then(()=>{})}const m=t=>{if("blob"===t.config.responseType)return t;const e={...t.headers},r={};Object.keys(e).forEach(t=>{const a=t.toLowerCase();let n=e[t];0===a.indexOf("x-pagination-")&&function(t){if(function(t){return Number.isInteger(t)}(t))return!0;if(u(t)){if("0"===t)return!0;if("-"===t.charAt(0)&&(t=t.slice(1)),/^[1-9]\d*$/.test(t))return!0}return!1}(n)&&(n*=1),r[a]=n}),t.headers=r;const a={...t}.data;return a.isOk?(d(a.data)&&(t.data=a.data),c(t.data.toast)&&function(t){const e={toast:!0,showConfirmButton:!1,timer:3e3,...t};return o.default.fire(e)}({title:t.data.toast,icon:"success"}).then(()=>{}),t):(l(t),!1)},x=t=>(l(t),!1);exports.ajaxGet=function(t,e,r){return i(e)&&(e={}),i(r)&&(r={}),p("GET",t,{params:e,...r})},exports.ajaxHandleError=l,exports.ajaxPatch=function(t,e,r){return i(r)&&(r={}),p("PATCH",t,{data:e,...r})},exports.ajaxPost=function(t,e,r){return i(r)&&(r={}),p("POST",t,{data:e,...r})},exports.ajaxPut=function(t,e,r){return i(r)&&(r={}),p("PUT",t,{data:e,...r})},exports.ajaxRequest=p;
//# sourceMappingURL=ajax.cjs.map
