import{encode as t,decode as e}from"js-base64";import{parse as r,stringify as n}from"qs";import o from"axios";import a from"sweetalert2";function i(t){return Object.is(t,void 0)}function u(t){return Object.is(t,null)}function c(t){return i(t)||u(t)}function s(t){return Object.is(t,!0)}function f(t){return Object.is(t,!1)}function l(t){return s(t)||f(t)}function p(t){return("number"==typeof t||"bigint"==typeof t)&&!Object.is(t,NaN)}function d(t){return Number.isInteger(t)}function m(t){if(d(t))return!0;if(b(t)){if("0"===t)return!0;if("-"===t.charAt(0)&&(t=t.slice(1)),/^[1-9]\d*$/.test(t))return!0}return!1}function b(t){return"string"==typeof t}function h(t){return b(t)&&""!==t.trim()}function y(t){return b(t)&&""===t.trim()}function O(t){return Array.isArray(t)}function j(t){return O(t)&&t.length>0}function g(t){return O(t)&&0===t.length}function w(t){return"object"==typeof t&&!u(t)&&!O(t)}function x(t){return w(t)&&Object.keys(t).length>0}function A(t){return w(t)&&0===Object.keys(t).length}function C(t){if(!w(t))return!1;if("[object Object]"!==Object.prototype.toString.call(t))return!1;if(null===Object.getPrototypeOf(t))return!0;let e=t;for(;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function _(t){return"function"==typeof t}function T(t){return"symbol"==typeof t}function k(t){return c(t)||f(t)||Object.is(t,NaN)||v(t)||y(t)}function P(t,e){return!(!b(t)||!b(e))&&-1!==t.indexOf(e)}function v(t){return p(t)&&0==t}function B(t){return!!b(t)&&/[\u4e00-\u9fa5]+/g.test(t)}function N(e){return t(e).replaceAll("+","-").replaceAll("/","_").replaceAll("=",".")}function S(t){return e(t.replaceAll(".","=").replaceAll("_","/").replaceAll("-","+"))}function E(t){if(b(t)||(t=window.location.search),(t=t.trimStart()).startsWith("http:")||t.startsWith("https:")){const e=t.split("?");e.length>1&&delete e[0],t=e.join("")}else"?"===t.charAt(0)&&(t=t.replace(/^[?]+/,""));return`${t}`}function q(t){return r(E(t))}function H(t,e){const r=q(e);return c(r[t])?null:r[t]}function I(){return I=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},I.apply(this,arguments)}function U(t){const e=I({toast:!0,showConfirmButton:!1,timer:3e3},t);return a.fire(e)}function W(t){const e=I({width:500,iconHtml:'<i class="bi bi-exclamation-circle text-primary"></i>',customClass:{icon:"border-0 mt-0 mb-3",confirmButton:"btn btn-primary px-4 py-2"},showClass:{popup:"animate__animated animate__fadeInUp animate__faster",backdrop:"swal2-backdrop-show"},hideClass:{popup:"animate__animated animate__fadeOutDown animate__faster",backdrop:"swal2-backdrop-hide"}},t);return a.fire(e)}function $(t,e,r){const a=o.create();return a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",a.defaults.headers.put["Content-Type"]="application/x-www-form-urlencoded",a.defaults.headers.patch["Content-Type"]="application/x-www-form-urlencoded",a.interceptors.response.use(J,K),a.request(I({method:t,url:e,timeout:0,paramsSerializer:t=>n(t,{arrayFormat:"brackets"}),withCredentials:!1,responseType:"json"},r))}function z(t,e,r){return c(e)&&(e={}),c(r)&&(r={}),$("GET",t,I({params:e},r))}function D(t,e,r){return c(r)&&(r={}),$("POST",t,I({data:e},r))}function F(t,e,r){return c(r)&&(r={}),$("PUT",t,I({data:e},r))}function G(t,e,r){return c(r)&&(r={}),$("PATCH",t,I({data:e},r))}function L(t){let e;if(t instanceof Error){if(c(t.response))return void W({text:"网络繁忙（400001），请稍后再试",confirmButtonText:"关 闭"}).then(()=>{});w(t.response)&&!c(t.response.data)&&(t=t.response)}w(t)||W({text:"网络繁忙（400002），请稍后再试",confirmButtonText:"关 闭"}).then(()=>{});const r=I({},t).data;if(w(r)||W({text:"网络繁忙（400003），请稍后再试",confirmButtonText:"关 闭"}).then(()=>{}),e="网络繁忙（400000），请稍后再试",h(r.err)&&(e=r.err),r.retCode>=500)e="网络繁忙（400500），请稍后再试";else if(401===r.retCode)e="网络繁忙（400401），请稍后再试";else if(403===r.retCode)e="网络繁忙（400403），请稍后再试";else if(404===r.retCode)e="网络繁忙（400404），请稍后再试";else if(r.retCode>=400)if(Array.isArray(r.data))w(r.data[0])&&h(r.data[0].message)&&(e=r.data[0].message);else if(w(r.data))if(h(r.data.err))e=r.data.err;else if(w(r.data.err)){const t=Object.values(r.data.err);h(t[0])?e=t[0]:Array.isArray(t[0])&&h(t[0][0])&&(e=t[0][0])}else h(r.data.message)&&(e=r.data.message);W({text:e,confirmButtonText:"关 闭"}).then(()=>{})}const J=t=>{if("blob"===t.config.responseType)return t;const e=I({},t.headers),r={};Object.keys(e).forEach(t=>{const n=t.toLowerCase();let o=e[t];0===n.indexOf("x-pagination-")&&m(o)&&(o*=1),r[n]=o}),t.headers=r;const n=I({},t).data;return n.isOk?(w(n.data)&&(t.data=n.data),h(t.data.toast)&&U({title:t.data.toast,icon:"success"}).then(()=>{}),t):(L(t),!1)},K=t=>(L(t),!1);export{z as ajaxGet,L as ajaxHandleError,G as ajaxPatch,D as ajaxPost,F as ajaxPut,$ as ajaxRequest,O as isArray,g as isArrayEmpty,j as isArrayFilled,l as isBoolean,f as isFalse,k as isFalsyValue,_ as isFunction,d as isInteger,m as isIntegeric,c as isNil,u as isNull,p as isNumber,v as isNumberZero,w as isObject,A as isObjectEmpty,x as isObjectFilled,C as isPlainObject,b as isString,B as isStringContainsChChars,P as isStringContainsString,y as isStringEmpty,h as isStringFilled,T as isSymbol,s as isTrue,i as isUndefined,W as swalAlert,U as swalToast,H as urlGetSearchParam,q as urlGetSearchParams,E as urlGetSearchString,S as urlSafeBase64Decode,N as urlSafeBase64Encode};
//# sourceMappingURL=es-utils.modern.js.map
