import t from"axios";import{stringify as e}from"qs";import r from"sweetalert2";function n(t){return Object.is(t,null)}function a(t){return function(t){return Object.is(t,void 0)}(t)||n(t)}function o(t){return"string"==typeof t}function i(t){return o(t)&&""!==t.trim()}function s(t){return"object"==typeof t&&!n(t)&&!function(t){return Array.isArray(t)}(t)}function c(t){const e={width:500,iconHtml:'<i class="bi bi-exclamation-circle text-primary"></i>',customClass:{icon:"border-0 mt-0 mb-3",confirmButton:"btn btn-primary px-4 py-2"},showClass:{popup:"animate__animated animate__fadeInUp animate__faster",backdrop:"swal2-backdrop-show"},hideClass:{popup:"animate__animated animate__fadeOutDown animate__faster",backdrop:"swal2-backdrop-hide"},...t};return r.fire(e)}function u(r,n,a){const o=t.create();return o.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",o.defaults.headers.put["Content-Type"]="application/x-www-form-urlencoded",o.defaults.headers.patch["Content-Type"]="application/x-www-form-urlencoded",o.interceptors.response.use(h,b),o.request({method:r,url:n,timeout:0,paramsSerializer:t=>e(t,{arrayFormat:"brackets"}),withCredentials:!1,responseType:"json",...a})}function f(t,e,r){return a(e)&&(e={}),a(r)&&(r={}),u("GET",t,{params:e,...r})}function d(t,e,r){return a(r)&&(r={}),u("POST",t,{data:e,...r})}function p(t,e,r){return a(r)&&(r={}),u("PUT",t,{data:e,...r})}function m(t,e,r){return a(r)&&(r={}),u("PATCH",t,{data:e,...r})}function l(t){let e;if(t instanceof Error){if(a(t.response))return void c({text:"网络繁忙（400001），请稍后再试",confirmButtonText:"关 闭"}).then(()=>{});s(t.response)&&!a(t.response.data)&&(t=t.response)}s(t)||c({text:"网络繁忙（400002），请稍后再试",confirmButtonText:"关 闭"}).then(()=>{});const r={...t}.data;if(s(r)||c({text:"网络繁忙（400003），请稍后再试",confirmButtonText:"关 闭"}).then(()=>{}),e="网络繁忙（400000），请稍后再试",i(r.err)&&(e=r.err),r.retCode>=500)e="网络繁忙（400500），请稍后再试";else if(401===r.retCode)e="网络繁忙（400401），请稍后再试";else if(403===r.retCode)e="网络繁忙（400403），请稍后再试";else if(404===r.retCode)e="网络繁忙（400404），请稍后再试";else if(r.retCode>=400)if(Array.isArray(r.data))s(r.data[0])&&i(r.data[0].message)&&(e=r.data[0].message);else if(s(r.data))if(i(r.data.err))e=r.data.err;else if(s(r.data.err)){const t=Object.values(r.data.err);i(t[0])?e=t[0]:Array.isArray(t[0])&&i(t[0][0])&&(e=t[0][0])}else i(r.data.message)&&(e=r.data.message);c({text:e,confirmButtonText:"关 闭"}).then(()=>{})}const h=t=>{if("blob"===t.config.responseType)return t;const e={...t.headers},n={};Object.keys(e).forEach(t=>{const r=t.toLowerCase();let a=e[t];0===r.indexOf("x-pagination-")&&function(t){if(function(t){return Number.isInteger(t)}(t))return!0;if(o(t)){if("0"===t)return!0;if("-"===t.charAt(0)&&(t=t.slice(1)),/^[1-9]\d*$/.test(t))return!0}return!1}(a)&&(a*=1),n[r]=a}),t.headers=n;const a={...t}.data;return a.isOk?(s(a.data)&&(t.data=a.data),i(t.data.toast)&&function(t){const e={toast:!0,showConfirmButton:!1,timer:3e3,...t};return r.fire(e)}({title:t.data.toast,icon:"success"}).then(()=>{}),t):(l(t),!1)},b=t=>(l(t),!1);export{f as ajaxGet,l as ajaxHandleError,m as ajaxPatch,d as ajaxPost,p as ajaxPut,u as ajaxRequest};
//# sourceMappingURL=ajax.esm.js.map
